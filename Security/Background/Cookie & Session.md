# Cookie & Session
μ›Ή μ„λ²„κ°€ μλ§μ€ ν΄λΌμ΄μ–ΈνΈλ¥Ό κµ¬λ³„ν•κ³  ν΄λΌμ΄μ–ΈνΈ λ³„λ΅ μ„λ΅ λ‹¤λ¥Έ κ²°κ³Όλ¥Ό λ°ν™ν•κΈ° μ„ν•΄μ„ ν—¤λ”μ— ν΄λΌμ΄μ–ΈνΈμ μ •λ³΄μ™€ μ”μ²­μ λ‚΄μ©μ„ κµ¬μ²΄ν™”ν•λ” λ“±μ λ°μ΄ν„°λ¥Ό ν¬ν•¨ν•λ”λ°, μ΄ ν—¤λ”μ— ν΄λΌμ΄μ–ΈνΈμ μΈμ¦ μ •λ³΄ λν• ν¬ν•¨λ  μ μμ
* ν΄λΌμ΄μ–ΈνΈμ μΈμ¦ μ •λ³΄ β†’ **Cookie**(μΏ ν‚¤)μ™€ **Session**(μ„Έμ…)μ— ν¬ν•¨λ¨

<br/>

### Cookieμ™€ Sessionκ°€ ν•„μ”ν• μ΄μ 
* ν΄λΌμ΄μ–ΈνΈμ IP μ£Όμ†μ™€ User-Agent β†’ λ§¤λ² λ³€κ²½λ  μ μλ” κ³ μ ν•μ§€ μ•μ€ μ •λ³΄
* HTTP ν”„λ΅ν† μ½μ Connectionlessμ™€ Stateless νΉμ§• β†’ **μ›Ή μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈλ¥Ό κΈ°μ–µν•  μ μ—†μ**
	- Connectionless: ν•λ‚μ μ”μ²­μ— ν•λ‚μ μ‘λ‹µμ„ ν• ν›„ μ—°κ²°μ„ μΆ…λ£ν•λ” κ²ƒ
		+ μƒ μ”μ²­μ΄ μμ„ λ•λ§λ‹¤ ν•­μƒ μƒλ΅μ΄ μ—°κ²°μ„ λ§Ίλ”λ‹¤λ” κ²ƒμ„ μλ―Έν•¨
	- Stateless: ν†µμ‹ μ΄ λλ‚ ν›„ μƒνƒ μ •λ³΄λ¥Ό μ €μ¥ν•μ§€ μ•λ” κ²ƒ
		+ μ΄μ „ ν†µμ‹ μ—μ„ μ‚¬μ©ν• λ°μ΄ν„°λ¥Ό λ‹¤λ¥Έ ν†µμ‹ μ—μ„ μ”κµ¬ν•  μ μ—†μμ„ μλ―Έν•¨

<br/>

## Cookie
* Keyμ™€ Valueλ΅ μ΄λ¤„μ§„ μΌμΆ…μ λ‹¨μ„(μ‚¬μ©μκ°€ μΈν„°λ„· μ›Ή μ‚¬μ΄νΈλ¥Ό λ°©λ¬Έν•  λ• μƒμ„±λλ” 4KB μ΄ν•μ νμΌ)
	- μΏ ν‚¤λ¥Ό ν†µν•΄ μƒνƒλ¥Ό μ μ§€ν•λ” λ°©λ²•
		1. μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ—κ² μΏ ν‚¤λ¥Ό λ°κΈ‰
		2. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚Ό λ•λ§λ‹¤ μΏ ν‚¤λ¥Ό κ°™μ΄ μ „μ†΅
		3. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ— ν¬ν•¨λ μΏ ν‚¤λ¥Ό ν™•μΈν•΄ ν΄λΌμ΄μ–ΈνΈλ¥Ό κµ¬λ¶„ν•  μ μμ(ν΄λΌμ΄μ–ΈνΈ μ‹ λ¶„ ν™•μΈ κ°€λ¥)
* μΏ ν‚¤μ μ©λ„ - ν΄λΌμ΄μ–ΈνΈμ μ •λ³΄ κΈ°λ΅κ³Ό μƒνƒ μ •λ³΄λ¥Ό ν‘ν„ν•λ” μ©λ„λ΅ μ‚¬μ©ν•¨
	- μ •λ³΄ κΈ°λ΅
		+ νμ—… μ°½ ν‘μ‹ μ—¬λ¶€λ¥Ό μΏ ν‚¤λ¥Ό ν†µν•΄ νλ‹¨ν•¨
		+ μ „μμƒκ±°λμ μ¥λ°”κµ¬λ‹ μ‹μ¤ν…
		+ μ›Ή μ‚¬μ΄νΈ μ΄μ© λ°©μ‹ μ¶”μ : μΏ ν‚¤λ¥Ό μ‚¬μ©ν•΄ μ‚¬μ©μμ λ°©λ¬Έ μ •λ³΄λ¥Ό μ¶”μ ν•¨
		+ νƒ€κΉƒ λ§μΌ€ν… - μΏ ν‚¤λ¥Ό μ΄μ©ν•΄ κ΄‘κ³  μ‹μ²­ μ, μ„ νΈ κ΄‘κ³  λ“±μ„ νμ•…ν•  μ μμ
	- μƒνƒ μ •λ³΄
		+ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‹λ³„ν•  μ μλ” κ°’μ„ μΏ ν‚¤μ— μ €μ¥ν•¨ β†’ μ‚¬μ©μμ β€μ„±ν–¥β€™κΉμ§€ νμ•…ν•μ—¬ μ‚¬μ©μλ³„ μ„±ν–¥μ„ μ‚¬μ΄νΈμ— κ·Έλ€λ΅ λ°μν•  μ μμ
* μΏ ν‚¤μ νΉμ§•
	- ν΄λΌμ΄μ–ΈνΈμ— μ €μ¥λ¨ β†’ ν΄λΌμ΄μ–ΈνΈλ” μ €μ¥λ μΏ ν‚¤λ¥Ό **μ΅°νοΉ’μμ •οΉ’μ¶”κ°€**ν•  μ μμ
	- ν΄λΌμ΄μ–ΈνΈμ μ”μ²­ ν—¤λ”μ— λ„£μ–΄ μ „μ†΅ν•¨ β†’ μ΄μ©μκ°€ μ”μ²­μ„ λ³΄λ‚Ό λ• **μΏ ν‚¤ ν—¤λ”λ¥Ό λ³€μ΅°**ν•  μ μμ
	- μΏ ν‚¤ μ„¤μ • μ‹ **λ§λ£ μ‹κ°„**μ„ μ§€μ •ν•  μ μμ
		+ λ§λ£ μ‹κ°„ μ΄ν›„μ—λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ μΏ ν‚¤κ°€ μ‚­μ λ¨
		+ μΏ ν‚¤μ λ§λ£λ” ν΄λΌμ΄μ–ΈνΈ(λΈλΌμ°μ €)μ—μ„ κ΄€λ¦¬λ¨
	- μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ‘ λ‹¤ μΏ ν‚¤λ¥Ό μ„¤μ •ν•  μ μμ

<br/>

### μΏ ν‚¤ λ³€μ΅°
μΏ ν‚¤ = ν΄λΌμ΄μ–ΈνΈμ λΈλΌμ°μ €μ— μ €μ¥λκ³  μ”μ²­μ— ν¬ν•¨λλ” μ •λ³΄ β†’ μ•…μμ μΈ ν΄λΌμ΄μ–ΈνΈ(κ³µκ²©μ)λ” μΏ ν‚¤ μ •λ³΄λ¥Ό λ³€μ΅°ν•΄ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚Ό μ μμ
* μ„λ²„κ°€ **λ³„λ‹¤λ¥Έ κ²€μ¦ μ—†μ΄** μΏ ν‚¤λ¥Ό ν†µν•΄ μ΄μ©μμ μ •λ³΄λ¥Ό μ‹λ³„ν•λ” κ²½μ° κ³µκ²©μκ°€ **νƒ€ μ΄μ©μλ¥Ό μ‚¬μΉ­**ν•΄ μ •λ³΄λ¥Ό νƒμ·¨ν•  μ μμ

<br/>

### μΏ ν‚¤λ¥Ό μ›Ή νμ΄μ§€μ— μ μ©ν•  μ μλ” λ°©λ²•
* μ„λ²„ *(μΌλ°μ μΌλ΅ μ„λ²„κ°€ μΏ ν‚¤λ¥Ό μ„¤μ •ν•¨)*
	- HTTP μ‘λ‹µ μ¤‘ ν—¤λ”μ— **μΏ ν‚¤ μ„¤μ • ν•΄λ”**(Set-Cookie)λ¥Ό μ¶”κ°€ν•λ©΄ ν΄λΌμ΄μ–ΈνΈμ λΈλΌμ°μ €κ°€ μΏ ν‚¤λ¥Ό μ„¤μ •ν•¨
	- μ„λ²„κ°€ μ„¤μ •ν• μΏ ν‚¤μ μ‚¬μ© λ‹¨κ³„
		1. **μ‚¬μ©μ μ»΄ν“¨ν„°μ— μΏ ν‚¤λ¥Ό μƒμ„±ν•¨** (μ‚¬μ©μκ°€ μ‚¬μ΄νΈλ¥Ό λ°©λ¬Έν•λ©΄ μ‚¬μ©μ μ»΄ν“¨ν„°μ— μΏ ν‚¤λ¥Ό λ§λ“¦)
			+ μλ„μ° 11 λ²„μ „ μ΄ν›„λ¶€ν„°λ” Internet Cookie APIλ΅ μΏ ν‚¤μ— μ ‘κ·Όν•κΈ° λ•λ¬Έμ— μ‚¬μ©μ μ»΄ν“¨ν„°μ—μ„ μΏ ν‚¤ νμΌμ„ μ €μ¥ν•μ§€ μ•μ
			+ μΏ ν‚¤λ¥Ό λ§λ“  μ‚¬μ΄νΈμ λ„λ©”μΈ μ΄λ¦„, κ·Έ μ‚¬μ΄νΈλ¥Ό κµ¬λ¶„ν•λ” μ«μ, μΏ ν‚¤ λ§κΈ°μΌ λ“±μ μ •λ³΄κΈ° μμ
		2. **μ‚¬μ©μ μ»΄ν“¨ν„°μ μΏ ν‚¤λ¥Ό μ›Ή μ„λ²„μ— μ „μ†΅** (μ›Ή μ„λ²„μ— μ ‘μ†ν•  λ• μ‚¬μ©μ μ»΄ν“¨ν„°μ— μλ” μΏ ν‚¤λ¥Ό μ›Ή μ„λ²„λ΅ μ „μ†΅ν•¨)
			+ μ΄μ „μ— λ°©λ¬Έν–λ μ‚¬μ΄νΈμ— μ¬μ ‘μ†ν•λ©΄ μ‚¬μ©μ μ»΄ν“¨ν„°μ— μ €μ¥λ μΏ ν‚¤λ¥Ό ν†µν•΄ λ°©λ¬Έμμ κ°μΈμ •λ³΄λ¥Ό μ• μ μμ 
* ν΄λΌμ΄μ–ΈνΈ
	- μλ°”μ¤ν¬λ¦½νΈλ¥Ό μ‚¬μ©ν•΄ μΏ ν‚¤λ¥Ό μ„¤μ •ν•¨
		```javascript
		document.cookie = β€name=alice;β€
		document.cookie = β€age=25; Expires=Fri, 30 Sep 2022 14:51:50 GMT;β€
		```

<br/>

### ν΄λΌμ΄μ–ΈνΈμ—μ„ μΏ ν‚¤λ¥Ό λ‹¤λ£¨λ” λ°©λ²• (macOS, Chrome κΈ°μ¤€)
* ν¬λ΅¬ Consoleμ„ ν™μ©ν•λ” λ°©λ²• - ν¬λ΅¬ κ°λ°μ λ„κµ¬μ Console νƒ­μ—μ„ **document.cookie**λ¥Ό μ…λ ¥ν•λ©΄ μΏ ν‚¤ μ •λ³΄λ¥Ό ν™•μΈν•  μ μμ<br/>
	<img width="771" alt="Cookie - Console" src="https://github.com/augustf86/Today_I_Learn/assets/122844932/9eb20c0e-6515-4ef2-bbb5-3fbda6dcae78">
 
* ν¬λ΅¬ Applicationμ„ ν™μ©ν•λ” λ°©λ²•: ν¬λ΅¬ κ°λ°μ λ„κµ¬μ Application νƒ­μ μ™Όμ½ λ©λ΅μ—μ„ Cookiesλ¥Ό νΌμΉλ©΄ Origin λ³„λ΅ μ„¤μ •λ μΏ ν‚¤ μ •λ³΄λ¥Ό ν™•μΈ/μμ •ν•  μ μμ<br/>
	<img width="779" alt="Cookie - Application" src="https://github.com/augustf86/Today_I_Learn/assets/122844932/f87bf7df-f4ce-4f7c-afc2-2127b3166b00">

<br/><br/>

## Session
* μΈμ¦ μ •λ³΄λ¥Ό μ„λ²„μ— μ €μ¥ν•κ³  ν•΄λ‹Ή λ°μ΄ν„°μ— μ ‘κ·Όν•  μ μλ” ν‚¤(μ μ¶”ν•  μ μ—†λ” λλ¤ν• λ¬Έμμ—΄, **Session ID**)λ¥Ό λ§λ“¤μ–΄ ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬ν•λ” λ°©μ‹μΌλ΅ μ‘λ™ν•¨
	- μΏ ν‚¤μ— μΈμ¦ μƒνƒλ¥Ό μ €μ¥ν•μ§€λ§ ν΄λΌμ΄μ–ΈνΈκ°€ μΈμ¦ μ •λ³΄λ¥Ό λ³€μ΅°ν•  μ μ—†κ² ν•κΈ° μ„ν•΄ μ‚¬μ©ν•¨
	- μ„Έμ… μ‚¬μ© λ°©μ‹
		+ λΈλΌμ°μ €λ” Session IDλ¥Ό μΏ ν‚¤μ— μ €μ¥ν•κ³  μ΄ν›„μ— **HTTP μ”μ²­μ„ λ³΄λ‚Ό λ• Cookie ν—¤λ”μ— μ΄ κ°’μ„ λ„£μ**
		+ μ„λ²„λ” μ”μ²­μ— ν¬ν•¨λ Session IDμ— ν•΄λ‹Ήν•λ” λ°μ΄ν„°λ¥Ό κ°€μ Έμ™€ μΈμ¦ μƒνƒλ¥Ό ν™•μΈν•¨

<br/>

* μΏ ν‚¤μ™€ μ„Έμ…μ μ°¨μ΄μ 
	| μΆ…λ¥ | μ°¨μ΄μ  |
	|-----------|---------------|
	| μΏ ν‚¤ | λ°μ΄ν„° μμ²΄λ¥Ό μ΄μ©μκ°€ μ €μ¥ν•κ³ , μ”μ²­μ Cookie ν—¤λ”μ— ν•΄λ‹Ή κ°’μ„ λ„£μ–΄μ„ μ „λ‹¬ν•¨ |
	| μ„Έμ… | λ°μ΄ν„°λ¥Ό μ„λ²„κ°€ μ €μ¥ν•κ³ , μ”μ²­μ— Session κ°’μ„ λ„£κ³  μ”μ²­μ„ μ „μ†΅ν•λ©΄ μ„λ²„μ <br/>Session Storage(DB)μ—μ„ ν•΄λ‹Ή ν‚¤λ¥Ό κ°€μ§€κ³  μλ” λ°μ΄ν„°λ¥Ό κ°€μ Έμ΄ |


<br/><br/><br/><br/>
### π”– μ¶μ²
* [λ“λ¦Όν•µ Web Hacking] π“ [Background: Cooke & Session](https://dreamhack.io/lecture/courses/166)
