# Introduction of Webhacking
🔖 출처: [Dreamhack Lecture] Introduction of Webhacking [🔗](https://dreamhack.io/lecture/courses/6)

<br/><br/>

## Web
* Web의 정의
    | | 설명 |
    |:---:|------|
    | 사전적 정의 | 인터넷에 연결된 컴퓨터들이 하이퍼텍스트 형식으로 표현된 다양한 정보를 효과적으로 이용할 수 있도록 구현된 전세계적인 시스템 <br/> &nbsp;&nbsp; - 시간과 장소에 구애받지 않고 인터넷에 접속할 수만 있다면 누구나 웹에서 정보를 구하거나 공유할 수 있음 <br/> &nbsp;&nbsp; - 인터넷 상에서 각각의 사용자(컴퓨터)가 거미줄처럼 연결되어 서로 정보를 공유한다는 의미에서 웹이 유래함|
    | 기술적 정의 | 인터넷을 기반으로 구현된 서비스 중 **HTTP를 이용하여 정보를 공유**하는 서비스 <br/> &nbsp;&nbsp; - 웹을 이용하는 컴퓨터들은 웹 서버(Web Server)와 웹 클라이언트(Web Client)로 구분할 수 있음 <br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - **웹 서버**(Web Server): 웹 서비스를 제공하는 주체 <br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - **웹 클라이언트**(Web Client): 웹 서비스를 제공받는 이용자 |
    - Web의 정확한 어원은 ***월드 와이드 웹***(World Wide Web, WWW, W3)이지만 간단히 웹(Web)이라고 부르는 경우가 더 많음

<br/>

* Web의 특징
    - 전세계적으로 가장 많이 사용되는 인터넷 서비스임
        + 이유
            | | 이유 |
            |:--:|------|
            | 1 | 웹 브라우저의 등장과 발전으로 대중적인 접근성이 높아짐 |
            | 2 | 다양항 형태의 서비스가 가능함 |
    - 인터넷 서비스 중 손쉽게 접근 가능함
        + 단순히 웹 사이트에 접속하는 형태 외에도 모바일 서비스, IoT 장비의 관리 페이지 등 다양한 형태로 일상생활 전반에 사용되고 있음

<br/>

* 💡 [Additional] 웹 서비스의 종류
    | | 설명 |
    |:---:|------|
    | **프론트엔드** <br/> (Front-end) | ***이용자의 요청을 받는 부분*** (= 이용자에게 보여지는 부분) <br/> &nbsp;&nbsp; - 웹 리소스(Web Resource)로 구성됨 *→ 페이지가 보여지고 있는 정보들은 모두 웹 리소스에 명시되어 있다는 것을 의미함* <br/> &nbsp;&nbsp; - ⚠️ 공격자가 쉽게 변조할 수 있는 대상이므로 좀 더 주의깊게 살펴봐야 함 |
    | **백엔드** <br/> (Back-end) | ***이용자의 요청을 처리하는 부분*** (= 이용자에게 보여지지 않는 부분) <br/> &nbsp;&nbsp; - 백엔드(서버)에서 제공하는 기능: 서버 측 스크립트 언어, 웹 서버, 데이터베이스 <br/> &nbsp;&nbsp; - 현재는 사용자가 입력한 값에 따라 다양한 결과를 화면에 보여주는 동적 기능도 제공하고 있음 |

<br/><br/>

### 웹의 역사
| | 설명 |
|:---:|------|
| 과거 | 초기 웹은 **지정된 문서의 내용을 출력해 사용자에게 제공하는 간단한 서비스**였음 <br/> &nbsp;&nbsp; - 이용자가 요청하는 정보를 제공하기만 하는 수동적인 형태의 서비스 → 별다른 로직 없이 **정적 페이지를 보여주는 기능**만 제공함 <br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ↳ 단순히 텍스트와 링크 위주로 이루어진, 하이퍼링크(Hyperlink)로 여러 페이지를 묶어넣은 정도|
| 현재 | 업무, 금융, 쇼핑 등 **다양한 분야에서 이용자에게 편의를 주는 복잡한 서비스**로 발전함 <br/> &nbsp;&nbsp; - 이용자의 요청을 해석하고 가공하여 필요한 정보를 제공하는 능동적인 형태의 서비스 <br/> &nbsp;&nbsp;&nbsp;&nbsp; → 사용자의 입력과 입력에 따른 기능 수행이 추가되어 사용자와 많은 부분을 상호작용함 | 
* 예시: Microsoft 홈페이지의 과거와 현재
    | | 설명 |
    |:---:|------|
    | 과거 | 단순히 정보를 제공하거나 마이크로소프트의 소프트웨어 중 하나인 Internet Explorer를 다운로드할 수 있도록 제공하는 기능 <br/>외에는 특별한 로직을 확인할 수 없음
    | 최근 | 사용자가 회원가입/로그인, 마이크로소프트 서비스 내에서 원하는 정보를 검색하거나 마이크로소프트의 제품을 웹을 통해 구매 가능해짐 |
    - 📌 **인터넷 아카이브**(https://archieve.org)를 이용하여  초창기의 웹 사이트를 살펴보는 방법
        | 순서 | 설명 |
        |:---:|------|
        | 01 | 인터넷 아카이브에 접속한 후 상단의 검색 창에 원하는 사이트의 주소를 입력한 후 [Enter] 버튼을 누름 |
        | 02 | 화면 상단의 그래프에서 연도를 선택한 다음 달력에 표시된 부분을 클릭하면 해당 시점의 웹 사이트를 살펴볼 수 있음 |

<br/>

* 웹 보안의 중요성이 대두된 배경
    - 과거에는 오프라인에서 진행되거나 물리적으로 저장되었던 정보들이 웹에서 접근 가능한 디지털 정보로 바뀌면서 **웹에서 처리하는 정보 자산들이 많아짐** <br/> &nbsp;&nbsp; → 이러한 **정보 자산에 웹을 통해 접근 가능해짐**에 따라 이를 안전하게 보관하고 처리해야 할 필요성도 함께 증가함
        | 웹에서 처리하는 정보 자산의 예시 |
        |---|
        | 이름, 전화번호, 주소, 카드 번호 등의 개인 정보 |
        | 기업 내부 자료, 임직원 정보 등 기업의 자산 |
    - **웹을 통한 정보 교환 과정에서 민감한 정보들이 유출되거나 악용되지 않도록 보호**하는 웹 보안의 중요성이 대두되고 있음

<br/><br/>

> ### ❓ 웹 해킹을 학습하기 전에 <U>웹에 대해 알아야 하는 이유</U>
> * 해킹(Hacking): 본래의 설계자나 관리자, 운영자가 의도하지 않은 동작을 일으키도록 하거나 체계 내에서 주어진 권한 이상으로 정보를 열람﹒복제﹒변경 가능하게 하는 행위
>   - 의도치 않은 행위를 발생시키기 위해서는 설계 또는 운영의 약점을 찾을 수 있어야 함 → ***공격을 위해선 해당 시스템에 대한 더 높은 이해도가 요구됨***

<br/><br/><br/>

## Web 기초 지식

### Web Browswer (웹 브라우저)
HTTP를 통해 인터넷 상에서 서버와 통신을 하며 서버로부터 전달받은 다양한 웹 리소스들을 가공해 **사용자가 웹과 HTTP의 동작 원리를 알지 못해도** 웹을 사용할 수 있도록 도와주는 소프트웨어
* 취약점이 발생하는 사용자의 입력값은 브라우저를 통해 전송됨 → 📌 <U>웹 해킹을 공부하기 위해서는 브라우저가 하는 행위를 필수적으로 이해하고 있어야 함</U>

<br/>

* 대중적으로 많이 쓰이는 웹 브라우저와 각 특징
    | | Chrome | Edge | Safari | Firefox |
    |---|----|----|----|----|
    | 제조사 | 구글 | 마이크로소프트 | 애플 | 모질라(Mozilla) 재단 |
    | Javascript 엔진 | V8 | ChakraCore | Javascript Core | Spider Monkey |
    | HTML/CSS 엔진 | Blink | EdgeHTML | Webkit | Gecko |
    | 사생활 보호/보장 (EDNS) | X | X | X | O |
    | 패스워드 동기화 | O | O | O | O |
    - 각 브라우저들이 수행하는 기본적인 기능은 동일함
    - HTML/CSS/JS의 해석 및 실행 속도나 내장 로그인을 통한 모든 디바이스 동기화 기능 등에 차별화를 두고 있음

<br/>

* 웹 브라우저를 통해 ```http://example.com/index.html```에 접속할 때 이뤄지는 통신

<br/>

* 💡 [Additional] 웹을 사용하기 위한 다양한 방법들 비교
    | 방법 | 설명 |
    |:---:|------|
    | 네트워크 프로그램 사용 | 웹 서버가 이해하고 해석할 수 있는 형태(HTTP)의 데이터를 직접 작성하여 전송하여야 함 <br/> &nbsp;&nbsp; - nc, telnet과 같은 프로그램이 대표적임 |
    | CLI 프로그램 사용 | 서버가 응답하여 주는 데이터를 단순히 출력만 하게 됨 <br/> *= html을 해석하여 화면에 출력하는 기능, css로 스타일을 입혀주는 기능, <br/> &nbsp;&nbsp; 자바스크립트를 실행하는 기능 등은 포함되어 있지 않음* <br/> &nbsp;&nbsp; - curl, wget 등이 있음 |
    | 웹 브라우저 사용 | 웹 브라우저의 주소창에 접속하고자 하는 주소를 입력하면, 웹 브라우저는 사용자가 요청한 주소를 대신 접속해 <br/>서버에서 응답한 데이터를 해석한 후 화면에 출력함 (웹 랜더링) |

<br/>

* 💡 [Additional] **Web Rendering** (웹 랜더링): 서버로부터 받은 리소스를 이용자에게 <U>시각화</U>하는 행위
    - 서버의 응답을 받은 웹 브라우저는 리소스의 타입을 확인하고, 적절한 방식으로 이용자에게 전달함
    - 웹 랜더링 엔진에 의해서 웹 랜더링 과정이 이루어지며, 브라아주별로 서로 다른 엔진을 사용함
        + 각각의 엔진에 따라 랜더링 과정과 순서, 속도의 차이는 존재함
        + ❗️ HTML을 파싱하고 시각화하여 이용자에게 보여주는 것은 동일함

<br/>

* 📌 Browser Devtools (개발자 도구)
    - 크롬, 사파리, 엣지, 파이어폭스 모두 개발자 도구를 포함하고 있으며, 각각의 인터페이스는 조금씩 다르지만 기본적인 기능은 흡사함
    - 개발자 도구의 기능
        + HTML, CSS 코드를 브라우저에서 수정하고 결과를 바로 확인할 수 있음
        + 자바스크립트 코드를 대상으로 디버거도 제공함
        + 서버와 오가는 HTTP 패킷을 상세하게 볼 수 있음 → 프로토콜 상에서 발생하는 문제도 쉽게 발견 가능
    - 🛠️ [MacOS, Chrome 브라우저] DevTools 실행 방법
        | | 방법 |
        |:---:|------|
        | 01 | 단축키 ***Option + Command + I***를 사용함 |
        | 02 | 크롬 브라우저의 메뉴에서 ***보기 - 개발자 정보 - 개발자 도구***를 클릭 |
        + 개발자 도구의 주요 탭 설명
    - 🔗 자세한 내용은 [Tools: Browser DevTools]()을 참고


<br/><br/>

### Web Resource (웹 리소스)
웹에서 사용하는 콘텐츠
* 📌 <U>모든 웹 리소스들은 고유의 URI(Uniform Resource Indicator)를 가지고, 이를 이용하여 식별됨</U>
* 사용자의 요청이 서버로 들어오면 서버는 웹 리소스들로 응답하며, 웹 브라우저는 사용자가 볼 수 있는 형태로 가공하여 화면에 출력함

<br/>

* 웹 브라우저의 주소창에 입력한 주소 ```http://samplesite.com/index.html```의 의미 <br/> &nbsp;&nbsp; → ```samplesite.com```에 존재하는 ```/index.html``` 리소스에 대한 요청을 수행하는 것

<br/>

* 페이지를 구성하는 대표적인 웹 리소스들
    | 웹 리소스 | 설명 |
    |:---:|------|
    | HTML | **Hyper Text Markup Language**의 약자 <br/> 웹 문서의 뼈대를 구축하기 위한 마크업 언어 <br/> &nbsp;&nbsp; - 정해진 태그(```<태그명>```)과 태그 내 속성(```속성명="속성값"```)을 지정하여 문서를 구성함 <br/> &nbsp;&nbsp; - 현재는 HTML5가 표준으로 확정되었고, 지속적으로 발전하고 있음 |
    | CSS | **Cascading Style Sheets**의 약자 <br/> HTML이 표시되는 방법을 정의하는 스타일 시트 언어 <br/> &nbsp;&nbsp; - 이미지, 태그, 글자 등 다양한 웹 리소스들의 출력 시 스타일을 정함 *→ 웹 사이트의 외관, 즉 디자인을 담당함* <br/> &nbsp;&nbsp; - 웹 브라우저는 CSS를 참고하여 웹 문서를 시각화함 |
    | JS | **Javascript**의 약자 <br/> 이용자의 브라우저에서 실행되며, 페이지 내에서의 행위들을 설정할 수 있는 프로그래밍 언어 (Client-Side Script) <br/> &nbsp;&nbsp; - 성능 문제로 인해 서버 측에서 처리하지 않는 부분을 클라이언트 측에서 처리할 때 주로 사용함 |
    | Etc | 웹 페이지 내의 문서, 이미지, 동영상, 폰트 등 |

<br/><br/>

### URI / URL
* URI와 URL의 비교
    | URI | URL |
    |------|------|
    | **Uniform Resource Indicator**의 약자 <br/> 리소스를 식별하기 위한 식별자 | **Uniform Resource Locator**의 약자 <br/> 리소스의 **위치**를 식별하기 위한 <U>URI의 하위 개념</U> |
    - 📌 웹에서 접속할 때 웹 사이트의 주소(위치)를 이용해 접근하는 것은 URL이자 URI를 사용한 것 <br/> &nbsp;&nbsp; → **최근 들어서는 둘을 혼용해서 사용하는 추세임**

<br/>

* URI (Uniform Resource Indicator)
    * 구성 요소
        | 요소 | 설명 |
        |:---:|------|
        | Scheme | 웹 브라우저가 웹 서버에 접속할 때 어떤 통신 규약(프로토콜)을 사용할 지 지정함 <br/> - 일반적으로 http/https를 사용하며 해당 프로토콜에 대한 정보는 아래 **HTTP/HTTPS** 부분을 참고 |
        | Authority | Host와 Port로 구분됨 <br/> - **Host**: 접속할 웹 서버의 호스트(서버 주소)에 대한 정보 <br/> &nbsp;&nbsp;&nbsp;&nbsp; → 도메인(Domain)이나 IP Address가 호스트로 사용될 수 있음 <br/> - **Port**: 접속할 웹 서버의 포트에 대한 정보 |
        | Path | 접속할 웹 서버의 경로에 대한 정보(= 웹 브라우저가 연결하려고 하는 리소스에 대한 정보) <br/> &nbsp;&nbsp; - ```/``` 문자로 구분됨 |
        | Query | 웹 브라우저가 서버에게 전달하는 파라미터 (추가적인 정보) <br/> &nbsp;&nbsp; - ```?``` 문자 뒤에 붙으며 일반적으로 ```파라미터명=인자값``` 형식으로 되어 있음 |
        | Fragment | 메인 리소스(페이지) 내에 존재하는 서비 리소스에 접근할 때 이를 식별사기 위한 정보를 담고 있음 <br/> &nbsp;&nbsp; - 웹 브라우저만 가지고 있는 데이터 <br/> &nbsp;&nbsp; - URL에서 ```#``` 문자 뒤에 붙음 |

<br/><br/>

### Encoding (인코딩)
문자 또는 기호 등의 정보, 형태를 표준화, 보안 등의 목적으로 다른 형태나 형식으로 변환하는 처리 혹은 그 처리 방식
* Decoding (디코딩) → Encoding의 반대 개념
    - 인코딩된 데이터를 원래 형태로 변환하는 것 (📌 Encoding과 Decoding에 사용된 방식은 동일해야 함)

<br/>

* 웹에서 사용하는 대표적인 인코딩
    - **URL Encoding** (percent encoding)
        + URI 구조체 내에서 예약어(구분자)로 사용되는 문자들을 전송하고자 할 때 사용함
            - ⚠️ 예약어는 URI 구조 내에서 문법적으로 중요한 의미를 가지고 있음 → ***문법적으로 사용하지 않을 경우에는 반드시 인코딩해 사용해야 함***
        + 인코딩 방식
            + 입력된 문자를 ASCII 테이블에서 매칭되는 Hex 값 앞에 ```%``` 문자를 붙여 인코딩할 수 있음
        + 예시: ```?```, ```#```, ```&```, ```=``` 문자의 URL Encoding
            | 문자 | URL Encoding |
            |:---:|:---:|
            | ```?``` | ```%3F``` |
            | ```#``` | ```%23``` |
            | ```&``` | ```%26``` |
            | ```=``` | ```%3D``` |
    - **HTML entity Encoding**
        + HTML 문서 내에서 사용하는 문자들이 <U>HTML에서 사용하는 태그로 인식하지 않도록 하기 위해서</U> 사용함
        + 인코딩 방식
            | 분류 | 설명 |
            |:---:|------|
            | Entity name encoding | 주요한 문자들의 경우 지정되어 있는 Entity name을 사용하여 인코딩할 수 있음 |
            | Entity number encoding | 입력된 문자를 ASCII 테이블에서 매칭되는 Hex 값 앞에 ```&#x```를 붙여 인코딩함 |
        + 예시: ```&```, ```<```, ```>``` 문자의 HTML entity Encoding
            | 문자 | Entity name encoding | Entity number encocding |
            |:---:|:---:|:---:|
            | ```&``` | ```&amp;``` | ```&#x26;``` |
            | ```<``` | ```&lt;``` | ```&#x3C;``` |
            | ```>``` | ```&gt;``` | ```&#x3E;``` |

<br/>

> * 💡 **인코딩**(Encoding)과 **암호화**(Encryption)의 비교
>   | | 비교 |
>   |:---:|------|
>   | 인코딩 | 알고리즘이 모두 공개되어 있고 키와 같은 요소가 포함되어 있지 않음 <br/> &nbsp;&nbsp; → ***모두가 원래의 정보로 복원이 가능함*** |
>   | 암호화 | 양방향 암호 알고리즘 <br/> &nbsp;&nbsp; → ***일치한 알고리즘과 유효한 키를 가지고 있다면 원래의 정보로 복원이 가능함***

<br/><br/>

### HTTP / HTTPS
