# File Vulnerabilities for Linux

## Linux 파일 시스템
* 유닉스 계열이 운영 체제의 특징
    -  "everything is a file" = 장치, 프로세스 등 다양한 객체들을 파일 시스템을 통해 제어함 <br/> &nbsp;&nbsp; → ⚠️ 파일 업로드 및 다운로드 취약점이 발생할 경우 큰 영향을 끼칠 수 있음
    - 디스크 저장 유무로 분류하는 파일의 종류
        + 대부분의 파일들은 디스크에 저장됨
        + 가상 파일의 경우 저장되지 않고 가상 파일 시스템에 위치해 특정 기능을 제공함

<br/>

### 리눅스 파일 시스템의 파일 종류
| 종류 | 설명 |
|---|------|
| 로그 및 데이터 파일 | 운영 체제 및 서비스의 로그와 각종 문서가 저장되는 위치 |
| 설정 파일 | 운영 체제 및 서비스를 구성하는 설정 파일 |
| 장치 및 가상 파일 | 운영 체제를 구성하기 위한 파일 (각각의 파일은 커널 기능과 밀접한 관련이 있음) |
| 프로그램 및 라이브러리 | 프로그램의 명령어가 저장된 위치와 이들을 실행하기 위한 라이브러리의 위치 |
| 임시 파일 | 운영 체제 및 서비스에서 사용하는 임시 디렉터리 또는 파일 |

<br/>

* 로그 및 데이터 파일
    | 디렉터리 | 설명 |
    |---|------|
    | /var/www | 웹 문서 및 기타 웹 서버에서 사용되는 파일을 저장함 |
    | /var/lib | 시스템의 각종 서비스에서 자료를 저장할 때 사용함 <br/> &nbsp;&nbsp; - 데이터베이스 등이 여기에 속함 |
    | /var/lib/mysql | MySQL 데이터베이스의 데이터가 저장됨 |
    | /var/lib/pgsql <br/> /var/lib/postgresql | PostgreSQL 데이터베이스의 데이터가 저장됨 |
    | /var/log | 시스템 서비스 등의 로그를 저장할 때 사용함 <br/> &nbsp;&nbsp; - 웹 서버 로그가 보통 여기에 위치함 |
    | /var/cache | 캐시 데이터를 저장함 <br/> &nbsp;&nbsp; - 일반적으로 삭제되어도 재생성이 가능함 |
    | /media | 제거 가능한 매체를 마운트할 때 주로 사용함 <br/> &nbsp;&nbsp; - USB 플래시 메모리, 기타 이동 저장 장치 등이 마운트됨 |
    | /mnt | 기타 파일시스템을 임시로 마운트하는 용도로 주로 사용됨 |

<br/>

* 설정 파일
    | 디렉터리 및 파일 | 설명 |
    |---|------|
    | /etc | 운영체제 초기 부팅 시 필요한 최소한의 명령어를 구현하는 프로그램 파일을 저장함 |
    | /etc/apache2 <br/> /etc/httpd | Apache Web Server의 설정 정보를 저장함 |
    | /etc/nginx | Nginx 웹 서버의 설정 정보를 저장함 |
    | /etc/mysql | MySQL 데이터베이스 서버의 설정 정보를 저장함 |
    | /opt/etc | 추가적으로 설치된 프로그램의 설정 정보를 저장함 <br/> &nbsp;&nbsp; - 존재하지 않을 수도 있음 |
    | /etc/mysql/my.cnf | MySQL 데이터베이스의 주 설정파일 |
    | /etc/passwd <br/> /etc/group | 사용자 및 그룹 정보를 저장함 |
    | /etc/shadow <br/> /etc/gshadow | 사용자 및 그룹의 인증 비밀번호를 암호화하여 저장함 (Shadow Passwod 정책 사용) <br/> &nbsp;&nbsp; - 일반적으로 관리자 및 권한 있는 프로그램만이 접근할 수 있음 |
    | /etc/hostname | 현재 시스템의 호스트명을 저장함 |
    | /etc/hosts | 호스트명의 실제 주소를 탐색할 때 사용되는 정적 순람표 |
    | /etc/fstab | 현재 시스템에 등록할 파일시스템의 목록을 저장함 |

<br/>

* 장치 및 가상 파일
    | 디렉터리 및 파일 | 설명 |
    |---|------|
    | /dev | 각종 디스크 및 장치 파일을 제공함 |
    | /sys | 하드웨어(주변 기기 등) 및 플랫폼에 접근할 수 있도록 함 |
    | /proc | 프로세스 및 시스템 정보를 제공하는 가상 파일시스템이 위치함 |
    | /proc/sys | 운영체제의 동작을 제어할 수 있는 각종 파라미터가 위치함 |
    | /proc/self/net <br/> (또는 /proc/net) | 운영체제 네트워크 계층의 다양한 정보를 제공하는 파일들이 위치함 |
    | /dev/null <br/> /dev/zero <br/> /dev/full <br/> /dev/random <br/> /dev/urandom | 실제 물리적인 장치를 나타내지는 않지만 자주 사용하는 특수 파일 |
    | /dev/pts | 유사 터미널(pseudo terminal) TTY 장치가 위치한 디렉터로 <br/> &nbsp;&nbsp; - SSH 터미널 또는 터미널 에뮬레이터 등에서 사용됨 |
    | /dev/stdin -> /proc/self/fd/0 | 파일 디스크럽터 0, 즉 표준 입력(standard input)에 사용된 파일을 나타내는 심볼릭 링크 |
    | /dev/stdout -> /proc/self/fd/1 | 파일 디스크럽터 1, 즉 표준 출력(standard output)에 사용된 파일을 나타내는 심볼릭 링크 |
    | /dev/stderr -> /proc/self/fd/2 | 파일 디스크럽터 2, 즉 표준 오류 출력(standard error)에 사용된 파일을 나타내는 심볼릭 링크 |

<br/>

* 프로그램 및 라이브러리
    | 디렉터리 | 설명 |
    |---|------|
    | /bin <br/> /sbin | 운영체제 초기 부팅 시 필요한 최소한의 명령어를 구현하는 프로그램 파일을 저장함 |
    | /boot | 커널이나 부트더 옵션 등 부팅에 필요한 파일을 저장함 |
    | /lib <br/> /lib64 <br/> /libx32 | 운영체제 초기 부팅 시 필요한 최소한의 라이브러리 파일을 저장함 |
    | /opt | 추가적인 프로그램을 저장함 |
    | /usr/bin | 각종 명령어 및 프로그램 파일을 저장함 |
    | /usr/sbin | 시스템 관리자가 주로 사용하는 각종 명령어 및 프로그램 파일을 저장함 |
    | /usr/lib <br/> /usr/lib64 <br/> /usr/libx32 | 시스템에서 공유되는 라이브러리 파일을 저장함 |
    | /usr/share | 기타 시스템에서 공유되는 파일을 저장함 |

<br/>

* 임시 파일
    | 디렉터리 | 설명 |
    |---|------|
    | /tmp | 임시 파일을 저장함 <br/> &nbsp;&nbsp; - 시스템 재시작(재부팅) 시 저장한 파일이 삭제될 수 있음 <br/> &nbsp;&nbsp; - 용량에 상당한 제한이 있을 수 있음 <br/> &nbsp;&nbsp; - 디스크 또는 메모리 상(tmpfs)에 존재할 수 있음 |
    | /var/tmp | 임시 파일을 저장함 <br/> &nbsp;&nbsp; - 시스템 재시작(재부팅) 시에도 일반적으로 유지됨 |
    | /run <br/> (/var/run) | 부팅 후 생성된 각종 런타임 데이터 및 IPC 소켓 등이 이곳에 위치함 <br/> &nbsp;&nbsp; - 일반적으로 디스크에 저장되지 않고 메모리 상에서만 존재함(tmpfs) |
    | /var/run/postgresql | PostgreSQL 소켓 등이 위치함 |
    | /var/run/mysql | MySQL 소켓 등이 위치함 |
    | /dev/shm | Linux ```shm_open(3)``` C 라이브러리 함수에서 사용됨 <br/> &nbsp;&nbsp; - 일반적으로 디스크에 저장되지 않고 메모리 상에서만 존재함(tmpfs) <br/> &nbsp;&nbsp; - 시스템에 따라 존재하지 않을 수도 있음 |

<br/><br/>

## 파일 업로드 공격
