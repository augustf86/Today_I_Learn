# Command Injection

**Command Injection**: 이용자의 입력을 시스템 명령어로 실행하게 하는 취약점
* 명령어를 실행하는 함수에 이용자가 임의의 인자를 전달할 수 있을 때 발생함
    - 시스템 함수
        + PHP의 ```system```, NodeJS의 ```child_process```, 파이썬의 ```os.system``` 함수 등은 전달된 인자를 셸 프로그램에 전달해 명령어를 실행함
            - 셸 프로그램이 지원하는 다양한 메타 문자
                <img width="704" alt="메타 문자" src="https://github.com/augustf86/Today_I_Learn/assets/122844932/d5a8386b-7388-4797-83af-b541bf45fe7e">
              <br/>
        + 시스템 함수의 장단점
            | 장점 | 단점 |
            |---|---|
            | 이미 설치된 소프트웨어들을 쉽게 이용할 수 있음 | 함수의 인자가 셸의 명령어로 전달된다는 점에서 치명적인 취약점으로 이어질 수 있음 |

    - 시스템 함수 사용 시 **이용자의 입력을 제대로 검사하지 않으면 임의 명령어가 실행될 수 있음**
        + 리눅스 셸 프로그램이 지원하는 다양한 메타 문자 중에서 ``&&``, ``;``, ``|`` 등을 사용하면 여러 개의 명령어를 연속으로 실행시킬 수 있음
            + 명령어를 연속으로 실행시켜 공격자는 임의 명령어를 실행하도록 만들 수 있음 (셸 획득 가능)

* 공격에 사용되면 웹 애플리케이션에 임의 명령어를 실행할 수 있어 공격 파급력이 높음
* Command Injection 방지 방법
    - 입력 값에 대해 메타 문자의 유무룰 철저히 검사
    - 시스템 메타 문자를 해석하지 않고 그대로 사용하는 함수를 사용해야 함

<br/><br/><br/><br/>
### 🔖 출처
* [드림핵 Web Hacking] 📌 [ServerSide: Command Injection](https://dreamhack.io/lecture/courses/187)
